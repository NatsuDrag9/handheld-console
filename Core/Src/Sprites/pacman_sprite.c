/*
 * pacman_sprite.c
 *
 *  Created on: Feb 14, 2025
 *      Author: rohitimandi
 */

#include "Sprites/pacman_sprite.h"

#ifdef DISPLAY_MODULE_LCD
 // Pacman animation frames (16x16 pixels for LCD)
static const uint8_t PACMAN_FRAME_1[] = {
    0x00, 0x00, 0x03, 0xC0, 0x0F, 0xF0, 0x1F, 0xF8,
    0x3F, 0xFC, 0x7F, 0xFE, 0x7F, 0xFE, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0xFE, 0x7F, 0xFE,
    0x3F, 0xFC, 0x1F, 0xF8, 0x0F, 0xF0, 0x03, 0xC0
};

static const uint8_t PACMAN_FRAME_2[] = {
    0x00, 0x00, 0x03, 0xC0, 0x0F, 0xF0, 0x1F, 0xF8,
    0x3F, 0xFC, 0x7F, 0xE0, 0x7F, 0x80, 0xFF, 0x00,
    0xFF, 0x00, 0xFF, 0x00, 0x7F, 0x80, 0x7F, 0xE0,
    0x3F, 0xFC, 0x1F, 0xF8, 0x0F, 0xF0, 0x03, 0xC0
};

// Ghost animation frames (16x16 pixels for LCD)
static const uint8_t GHOST_FRAME_1[] = {
    0x00, 0x00, 0x07, 0xE0, 0x1F, 0xF8, 0x3F, 0xFC,
    0x7F, 0xFE, 0x7F, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xDB, 0xDB, 0xDB, 0xDB, 0x99, 0x99
};

static const uint8_t GHOST_FRAME_2[] = {
    0x00, 0x00, 0x07, 0xE0, 0x1F, 0xF8, 0x3F, 0xFC,
    0x7F, 0xFE, 0x7F, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0x99, 0x99, 0x99, 0x99, 0xDB, 0xDB
};

// Scared ghost frames (16x16 pixels for LCD)
static const uint8_t SCARED_GHOST_FRAME_1[] = {
    0x00, 0x00, 0x07, 0xE0, 0x1F, 0xF8, 0x3F, 0xFC,
    0x73, 0xCE, 0x73, 0xCE, 0xFF, 0xFF, 0xF3, 0xCF,
    0xF3, 0xCF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x0F,
    0xF0, 0x0F, 0xDB, 0xDB, 0xDB, 0xDB, 0x99, 0x99
};

// Static sprites (16x16 pixels for LCD)
static const uint8_t DOT_SPRITE[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x03, 0xC0, 0x07, 0xE0, 0x07, 0xE0,
    0x07, 0xE0, 0x07, 0xE0, 0x03, 0xC0, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

static const uint8_t POWER_PELLET_SPRITE[] = {
    0x00, 0x00, 0x03, 0xC0, 0x0F, 0xF0, 0x1F, 0xF8,
    0x3F, 0xFC, 0x7F, 0xFE, 0x7F, 0xFE, 0xFF, 0xFF,
    0xFF, 0xFF, 0x7F, 0xFE, 0x7F, 0xFE, 0x3F, 0xFC,
    0x1F, 0xF8, 0x0F, 0xF0, 0x03, 0xC0, 0x00, 0x00
};

#else
 // Pacman animation frames (8x8 pixels for OLED)
static const uint8_t PACMAN_FRAME_1[] = {
    0x3C, 0x7E, 0xFF, 0xFF, 0xFF, 0xFF, 0x7E, 0x3C  // Full circle
};

static const uint8_t PACMAN_FRAME_2[] = {
    0x3C, 0x7E, 0xFF, 0xFF, 0xF0, 0xE0, 0x40, 0x00  // Open mouth
};

// Ghost animation frames (8x8 pixels for OLED)
static const uint8_t GHOST_FRAME_1[] = {
    0x3C, 0x7E, 0xFF, 0xFF, 0xFF, 0xFF, 0xDB, 0x99  // Normal ghost
};

static const uint8_t GHOST_FRAME_2[] = {
    0x3C, 0x7E, 0xFF, 0xFF, 0xFF, 0xFF, 0x99, 0xDB  // Alternate legs
};

// Scared ghost frames (8x8 pixels for OLED)
static const uint8_t SCARED_GHOST_FRAME_1[] = {
    0x3C, 0x7E, 0xDB, 0xBD, 0xBD, 0xDB, 0x7E, 0x3C  // Scared ghost
};

// Static sprites (8x8 pixels for OLED)
static const uint8_t DOT_SPRITE[] = {
    0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00  // Small dot
};

static const uint8_t POWER_PELLET_SPRITE[] = {
    0x00, 0x3C, 0x7E, 0x7E, 0x7E, 0x7E, 0x3C, 0x00  // Power pellet
};
#endif

// Initialize static sprites
Sprite dot_sprite = {
    .bitmap = DOT_SPRITE,
    .width = SPRITE_SIZE,
    .height = SPRITE_SIZE
};

Sprite power_pellet_sprite = {
    .bitmap = POWER_PELLET_SPRITE,
    .width = SPRITE_SIZE,
    .height = SPRITE_SIZE
};

// Define sprite frames
static const Sprite pacman_frames[] = {
    {.bitmap = PACMAN_FRAME_1, .width = SPRITE_SIZE, .height = SPRITE_SIZE },
    {.bitmap = PACMAN_FRAME_2, .width = SPRITE_SIZE, .height = SPRITE_SIZE }
};

static const Sprite ghost_frames[] = {
    {.bitmap = GHOST_FRAME_1, .width = SPRITE_SIZE, .height = SPRITE_SIZE },
    {.bitmap = GHOST_FRAME_2, .width = SPRITE_SIZE, .height = SPRITE_SIZE }
};

static const Sprite scared_ghost_frames[] = {
    {.bitmap = SCARED_GHOST_FRAME_1, .width = SPRITE_SIZE, .height = SPRITE_SIZE }
};

// Initialize animated sprites
AnimatedSprite pacman_animated = {
    .frames = pacman_frames,
    .num_frames = 2,
    .current_frame = 0,
    .frame_delay = 200,  // ms per frame
    .last_update = 0
};

AnimatedSprite blinky_animated = {
    .frames = ghost_frames,
    .num_frames = 2,
    .current_frame = 0,
    .frame_delay = 300,  // ms per frame
    .last_update = 0
};

AnimatedSprite pinky_animated = {
    .frames = ghost_frames,
    .num_frames = 2,
    .current_frame = 0,
    .frame_delay = 300,  // ms per frame
    .last_update = 0
};

AnimatedSprite inky_animated = {
    .frames = ghost_frames,
    .num_frames = 2,
    .current_frame = 0,
    .frame_delay = 300,  // ms per frame
    .last_update = 0
};

AnimatedSprite clyde_animated = {
    .frames = ghost_frames,
    .num_frames = 2,
    .current_frame = 0,
    .frame_delay = 300,  // ms per frame
    .last_update = 0
};

AnimatedSprite scared_ghost_animated = {
    .frames = scared_ghost_frames,
    .num_frames = 1,
    .current_frame = 0,
    .frame_delay = 0,  // Static frame
    .last_update = 0
};